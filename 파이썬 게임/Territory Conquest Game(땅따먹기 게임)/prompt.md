너는 파이썬 게임 최고 개발자야.
Pygame을 사용해 땅따먹기 게임 전체 코드를 만들어줘.
기본 클래스 구조로 코드 작성
클래스마다 파일로 정리

파이썬으로 Paper.io / Splix.io 스타일의 실시간 "땅따먹기" 게임을 만들어줘.

-----------------------------------------
🎯 [게임 개요]
- 플레이어가 자신의 색깔 선을 그리며 땅을 넓혀가는 게임
- 자신이 그린 선이 다시 자기 땅과 연결되면, 그 내부 영역을 점령
- 자신의 선이 완성되기 전에 적이나 자기 자신에게 닿으면 게임 오버
- 목표: 제한 시간 내에 최대한 넓은 영역 점령하기
-----------------------------------------

🧩 [기본 구조]
1. **그래픽 엔진**
   - Pygame 사용 (800x800 창)
   - 프레임 기반 실시간 갱신 (FPS 60)
   - 격자(Grid) 표현 또는 픽셀 단위 이동 중 선택 가능

2. **플레이어 (Player Class)**
   - 속성: 위치(x, y), 속도, 방향, 색상, 경로(그린 선), 점령영역
   - 이동은 방향키 또는 WASD로 조작
   - 선을 그리고 있는 중 상태(“밖”)와, 자기 땅 안 상태(“안”) 구분
   - 선을 그리고 돌아오면 폴리곤 닫기 알고리즘으로 영역 채우기
   - 자기 선에 닿으면 즉시 패배

3. **영역 점령 로직**
   - 폴리곤(닫힌 경로) 내부를 Flood Fill 또는 Pygame Polygon Fill로 채움
   - 점령된 영역을 boolean mask 또는 색상 맵으로 관리
   - 매 프레임마다 전체 땅 면적 계산 (점수 = 점령된 픽셀 수)
   - 서로 다른 색의 영역이 겹치지 않도록 처리

4. **적 AI**
   - 기본 AI: 랜덤 이동 + 벽 회피
   - 향상된 AI: 플레이어 주변 감지, 플레이어 선 차단 시도
   - AI도 동일한 점령 로직 적용 (플레이어와 경쟁)

5. **게임 규칙**
   - 자신의 선 또는 적의 선에 부딪히면 사망
   - 벽 밖으로 나가면 사망
   - 타임 제한 모드 / 무한 모드 선택 가능
   - 점령률(%) 표시 및 실시간 순위 표시

6. **그래픽 UI**
   - 점수판: 좌측 상단에 현재 점령률, 생존 시간 표시
   - 미니맵(선택): 전체 맵 크기 대비 현재 영역 표시
   - 부드러운 색상 전환(점령 시 Fade-in 효과)
   - 배경: 검정 / 선: 플레이어 색 / 땅: 반투명 색상

7. **사운드 효과**
   - 선 생성 / 점령 성공 / 사망 시 효과음
   - 배경음 루프 (옵션)

8. **코드 구조**
   - main.py : 게임 루프, 이벤트 처리
   - player.py : 플레이어 클래스
   - ai.py : AI 행동 로직
   - utils.py : 점령 계산, 충돌 판정 함수
   - constants.py : 색상, 속도 등 상수
   - 모든 함수에 한글 주석 및 타입 힌트 포함

9. **기술 구현 포인트**
   - 선 충돌 감지: pygame.draw.line() 좌표 리스트 활용
   - 영역 계산: pygame.mask.from_surface() 또는 Polygon fill 사용
   - 점령 판정: 기존 mask + 신규 경로 차집합
   - 성능 최적화: Surface 복사 최소화, Rect 갱신 단위 제한

-----------------------------------------
📊 [출력 요구사항]
1. 전체 코드 (즉시 실행 가능한 완성본)
2. 주요 클래스 및 함수 설명 요약
3. 게임 규칙 요약
4. 실행 예시 (캡션 또는 콘솔 출력 설명)
5. 개선 아이디어 (온라인/멀티플레이/레벨 시스템 제안)

-----------------------------------------
🚀 [보너스 기능 제안]
- AI 여러 명 등장 (최대 4명)
- 레벨 기반 맵 확장 (장애물, 벽 구조물 포함)
- 색상 효과(Glow, Trail)
- 파워업 아이템 (속도 증가, 보호막)
- 점령률 100% 달성 시 승리 애니메이션
- 스코어보드(JSON 저장)

-----------------------------------------
📘 [출력 형식]
1. 실행 가능한 전체 코드
2. 주요 알고리즘 원리 설명
3. 시각적 구조 설명(텍스트 다이어그램)
4. 차후 확장 아이디어
-----------------------------------------

이 게임은 단순한 예제가 아닌,
“실제 플레이 가능한 Paper.io 스타일 땅따먹기 게임” 수준으로 완성해줘.
부드러운 움직임, 영역 채우기 애니메이션, 충돌 판정까지 완벽히 작동하도록.
